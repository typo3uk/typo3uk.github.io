{%- assign fivelevel = site.pages | sort: "path" -%}

{%- assign parts = include.current | split: '/' -%}
{%- assign depth = parts | size -%}
{%- assign depth = depth | plus:1 -%}
{%- assign isChildren = false -%}
{%- for i in fivelevel -%}
  {%- if i.url contains include.current and i.url != include.current -%}
    {%- assign isChildren = true -%}
  {%- endif -%}
{%- endfor -%}

{%- for five in fivelevel -%}
  {%- if isChildren == true -%}
    {%- if forloop.first -%}<ul>{%- endif -%}
      {%- capture slug -%}{{ five.url | split: "/" | last }}{%- endcapture -%}
      {%- capture current -%}{{ five.url | remove: slug | remove: "//" | append: "/" }}{%- endcapture -%}
      {%- if include.current == current and five.navhide != 1 and five.title != '' -%}
      <li>
        <a href="{{ five.url }}">
          {%- if five.navtitle -%}{{ five.navtitle }}{%- else -%}{{ five.title }}{%- endif -%}
        </a>
        {%- include map/4.html current=five.url -%}
      </li>
      {%- endif -%}
    {%- if forloop.last -%}</ul>{%- endif -%}
  {%- endif -%}
{%- endfor -%}
