{%- assign sixlevel = site.pages | sort: "path" -%}

{%- assign parts = include.current | split: '/' -%}
{%- assign depth = parts | size -%}
{%- assign depth = depth | plus:1 -%}
{%- assign isChildren = false -%}
{%- for i in sixlevel -%}
  {%- if i.url contains include.current and i.url != include.current -%}
    {%- assign isChildren = true -%}
  {%- endif -%}
{%- endfor -%}

{%- for six in sixlevel -%}
  {%- if isChildren == true -%}
    {%- if forloop.first -%}<ul>{%- endif -%}
      {%- capture slug -%}{{ six.url | split: "/" | last }}{%- endcapture -%}
      {%- capture current -%}{{ six.url | remove: slug | remove: "//" | append: "/" }}{%- endcapture -%}
      {%- if include.current == current and six.navhide != 1 and six.title != '' -%}
      <li>
        <a href="{{ six.url }}">
          {%- if six.navtitle -%}{{ six.navtitle }}{%- else -%}{{ six.title }}{%- endif -%}
        </a>
      </li>
      {%- endif -%}
    {%- if forloop.last -%}</ul>{%- endif -%}
  {%- endif -%}
{%- endfor -%}
