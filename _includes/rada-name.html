{%- if page.url contains "city" or page.url contains "town" -%}{%- assign isCityTown = true -%}{%- else -%}{%- assign isCityTown = false -%}{%- endif -%}
{%- assign url = page.url | split: "/" -%}
{%- assign size = url | size | minus: 1 -%}
{%- assign dir = url | slice: 0, size | join: "/" -%}

{%- if size == 3 -%}

  {%- for page in site.pages -%}
    {%- if page.url contains dir -%}

        {% if isCityTown == true %}
          {%- if page.council.title -%}
            {{ page.council.title }} міська&nbsp;рада
          {%- elsif page.legal.name-%}
            {{ page.legal.name }}
          {%- endif -%}
        {% elsif page.url contains "/region/ivano-frankivsk/" %}
          {%- if page.council.title -%}
            {{ page.council.title }} обласна&nbsp;рада
          {%- elsif page.legal.name -%}
            {{ page.legal.name }}
          {%- endif -%}
        {% else %}
          {%- if page.council.title -%}
            {{ page.council.title }} райо́нна&nbsp;рада
          {%- elsif page.legal.name -%}
            {{ page.legal.name }}
          {%- endif -%}
        {% endif %}

    {%- endif -%}
  {%- endfor -%}

{%- elsif size == 4 -%}
  {%- assign size = url | size | minus: 2 -%}
  {%- assign dir = url | slice: 0, size | join: "/" -%}

  {%- for page in site.pages -%}
    {%- if page.url contains dir -%}

        {% if isCityTown == true %}
          {%- if page.council.title -%}
            {{ page.council.title }} міська&nbsp;рада
          {%- elsif page.legal.name-%}
            {{ page.legal.name }}
          {%- endif -%}
        {% elsif page.url contains "/region/ivano-frankivsk/" %}
          {%- if page.council.title -%}
            {{ page.council.title }} обласна&nbsp;рада
          {%- elsif page.legal.name -%}
            {{ page.legal.name }}
          {%- endif -%}
        {% else %}
          {%- if page.council.title -%}
            {{ page.council.title }} райо́нна&nbsp;рада
          {%- elsif page.legal.name -%}
            {{ page.legal.name }}
          {%- endif -%}
        {% endif %}

    {%- endif -%}
  {%- endfor -%}

{%- elsif size == 7 -%}
  {%- assign size = url | size | minus: 5 -%}
  {%- assign dir = url | slice: 0, size | join: "/" -%}



{%- elsif size == 8 -%}
  {%- assign size = url | size | minus: 6 -%}
  {%- assign dir = url | slice: 0, size | join: "/" -%}



{%- elsif size <= 2 -%}
  {%- if page.legal.name -%}{{ page.legal.name }}{%- else -%}{{ site.legal.name }}{%- endif -%}
{%- else -%}
{%- endif -%}
